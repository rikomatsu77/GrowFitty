<h1 class="text-2xl font-bold text-[#2D4F4B] text-center mb-8">コーディネート一覧</h1>

<div class="max-w-2xl lg:max-w-5xl mx-auto px-4">
  <% if @selected_tag.present? %>
    <div class="mb-6 p-4 bg-[#E8F5F3] rounded-lg border border-[#4AA398]">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <span class="text-[#2D4F4B] font-medium">絞り込み中のタグ:</span>
          <span class="ml-2 px-3 py-1 bg-[#4AA398] text-white rounded-full text-sm">
            #<%= @selected_tag %>
          </span>
        </div>
        <%= link_to "絞り込み解除", posts_path(q: { title_or_body_cont: params.dig(:q, :title_or_body_cont) }.compact),
            class: "text-[#EF6C00] hover:text-[#d95f00] font-medium underline" %>
      </div>
    </div>
  <% end %>

  <%= render "search_form", q: @q, url: posts_path %>
<% if @posts.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <% @posts.each do |post| %>
        <%= render "post", post: post, current_page: :index %>
      <% end %>
    </div>
  <% else %>
    <% if @selected_tag.present? %>
      <p class="text-center text-[#4A6F6A]">「#<%= @selected_tag %>」タグの投稿が見つかりませんでした。</p>
    <% else %>
      <p class="text-center text-[#4A6F6A]">投稿がまだありません。</p>
    <% end %>
  <% end %>

  <div class="flex justify-center mt-8 mb-8">
    <%= paginate @posts %>
  </div>
</div>

<div class="flex flex-col md:flex-row justify-center items-center gap-4 mt-8 mb-16 py-12">
  <!-- 戻るボタン -->
  <%= link_to "戻る", root_path, class: "btn px-6 py-3 w-64 text-lg shadow-lg text-white bg-[#4AA398] hover:bg-[#3e8f8e] transition-colors duration-200" %>
  <!-- 新規投稿ボタン -->
  <%= link_to "新しいコーディネートを投稿する", new_post_path, class: "btn px-6 py-3 w-72 text-lg shadow-lg text-white bg-[#EF6C00] hover:bg-[#d95f00] transition-colors duration-200" %>
</div>
